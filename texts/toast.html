<i>Продолжаю знакомить читателей Хабра с главами из своей книжки «Теория счастья» с подзаголовком «Математические основы законов подлости». Это ещё не изданная научно-популярная книжка, очень неформально рассказывающая о том, как математика позволяет с новой степенью осознанности взглянуть на мир и жизнь людей. Она для тех кому интересна наука и для тех, кому интересна жизнь. А поскольку жизнь наша сложна и, по большому счёту, непредсказуема, упор в книжке делается, в основном, на теорию вероятностей и математическую статистику. Здесь не доказываются теоремы и не даются основы науки, это ни в коем случае не учебник, а то, что называется recreational science. Но именно такой почти игровой подход позволяет развить интуицию, скрасить яркими примерами лекции для студентов и, наконец, объяснить нематематикам и нашим детям, что же такого интересного мы нашли в своей сухой науке.</i>

<spoiler title="Опубликованные главы:">
&emsp;•&ensp; <a href="https://habr.com/post/416941/">Введение в мерфологию</a>
&emsp;•&ensp; <a href="https://habr.com/post/431706/">Случайности неслучайны?</a>
&emsp;•&ensp; Головокружительный полёт бутерброда с маслом
&emsp;•&ensp; <a href="https://habr.com/post/416551/">Закон арбузной корки и нормальность ненормальности</a>
&emsp;•&ensp; <a href="https://habr.com/post/416907/">Закон зебры и чужой очереди</a>
&emsp;•&ensp; <a href="https://habr.com/post/421351/"> Проклятие режиссёра и проклятые принтеры</a>
&emsp;•&ensp; <a href="https://habr.com/post/424071/"> Термодинамика классового неравенства</a>
</spoiler>
<img src="https://habrastorage.org/webt/qg/ng/y9/qgngy9jho00owcvbwofgivxm-lm.jpeg" width="60%" align='center'/>
В этой главе мы рассмотрим закон бутерброда и организуем целое исследование с применением метода Монте-Карло, и анализа размерностей. И, наконец, развенчаем популярный миф о том, что именно масло является причиной этого закона подлости.  
<cut />
Тема падающих бутербродов не даёт покоя ни широкой публике, ни исследователям. Десятки лет проводятся эксперименты, снимается кино, пишутся статьи, падающий бутерброд обрастает легендами и неправильными выводами. Мало какая бесполезная задачка привлекала к себе столько внимания, и если вы думаете, что всё это баловство, то имейте в виду, за её решение даже премии дают, правда, тоже несерьёзные. В 1995 году Роберт Мэтьюз получил Шнобелевскую премию за работу "Падающий бутерброд, закон Мерфи и фундаментальные константы", опубликованную в "European Journal of Physics". Несмотря на шуточную тему и соответствующую реакцию научного сообщества, это вовсе небезынтересная статья, в которой проводится тщательный анализ процесса соскальзывания, и делается далеко идущий вывод: на какой бы планете ни возникли антропоморфные существа, живущие в атмосфере, они будут обречены на закон бутерброда. После такого триумфа бесполезных исследований, можно бы тему и закрыть, но зачем упускать возможность рассмотреть  на примере занятной задачки интересные и объективно полезные методы!

<h3>Айда кидать бутерброды в Монте-Карло!</h3>
Мы редко подбрасываем бутерброды, как монетку, по крайней мере, когда становимся старше двух лет. Чаще всего, мы невольно повторяем примерно один и тот же эксперимент: бутерброд, изначально расположенный маслом вверх, выскальзывает из рук, или соскальзывает со стола. В процессе соскальзывания он закручивается, летит в воздухе, и, наконец, шлёпается на стол или на пол. На начальный этап падения влияет ряд параметров: трение о пальцы или поверхность стола, начальное положение бутерброда и его начальная скорость, высота падения, наконец, размеры бутерброда. Имеем динамическую систему с несколькими входными параметрами и одним выходным -- положением бутерброда на полу. Внутри системы, как и в случае с монеткой, работают механические законы, которые описываются дифференциальными уравнениями и они <i>детерминистические</i>. Это значит, что в них нет никаких случайностей -- результат зависит только от входных данных и при точном повторении параметров мы должны получать идентичные результаты. Это относится к модели бутерброда, представленной в виде системы дифференциальных уравнений, а что насчёт настоящих бутербродов, шероховатых и неповторимых, роняемых настоящими людьми в ресторанах, на улице, или на диване? Изменчивость реального мира можно описать, подавая на вход детерминистической системы случайные параметры.

Однако, даже алгебра случайных величин, включающая в себя лишь сложение и умножение -- дело непростое, а у нас дифференциальные уравнения! Мы не полезем в эти увлекательные дебри, а используем хорошо отработанную во многих областях технику -- <i>метод Монте-Карло</i>. Он состоит в накоплении статистики и в определении свойств некой сложной системы в результате многократных испытаний с различными случайными параметрами. Подчеркну ещё раз: исследуемая система не стохастична и не хаотична, и на случайные входные данные она реагирует предсказуемо. В методе Монте-Карло случайность нужна лишь для того, чтобы эффективно перебрать как можно больше вариантов и заглянуть во все реалистичные "углы", получив представление о поведении системы.

По существу, этим методом мы уже пользовались, наблюдая за велосипедистами на горке и ещё будем пользоваться устраивая дедлайн в офисе, и деля деньги в замкнутом обществе. Взаимооднозначное соответствие между вероятностью и мерой объёма либо площади, о котором мы говорили ранее, позволяет использовать метод Монте-Карло для численного интегрирования. Особенность предстоящего эксперимента с бутербродом состоит в том, что нас будет интересовать не распределение вероятности (точное или эмпирическое), а зависимость вероятности от параметров задачи.  Мы будем искать ответ на вопрос: при каких обстоятельствах выполняется закон бутерброда? Будем подавать на вход нашей динамической системы различные конкретные параметры и набирать статистику по падениям маслом вверх и маслом вниз. Таким образом, результатом ряда экспериментов будет число -- вероятность падения маслом вниз.  

Я убеждён, что намеренно <a href="https://www.youtube.com/watch?v=eFHXWuKNhms">ронять настоящие бутерброды</a> на пол неправильно, поэтому мы воспользуемся математическим моделированием. Для решения задачи о падении бутерброда я выбрал <a href="http://brm.io/matter-js/">один</a> из доступных симуляторов физического мира, которые используют для создания онлайн игр. Он позволил создать виртуальные стол и пол, а также два бутерброда. Один оказывался на краю стола, а второй -- "выскальзывал из пальцев", то есть, соскальзывал с точечной опоры. В моих силах задавать начальные позицию и угол бутерброда, горизонтальную скорость (случай смахивания бутерброда со стола), коэффициенты трения, размеры бутерброда и высоту падения. Эксперименты выглядят как-то так:

<img src="https://habrastorage.org/webt/u5/g4/dv/u5g4dvsma2opnp2odqe5lvvetr0.gif" width="90%" align="center"/><i><font color="#444">Эксперименты с падением виртуальных бутербродов в симуляторе физического мира.</font></i>

В момент касания бутербродом пола фиксируется угол бутерброда, вернее, угол вектора, нормального к нему. О том, с какой стороны оказалось масло, нам скажет знак синуса этого угла: положительному значению соответствует удачный случай, а отрицательному -- положение маслом вниз. Результат заносится в таблицу, и новый виртуальный бутерброд готов к падению. Задачу мы поставим такую: оценить вероятность падения бутерброда маслом вниз при его падении с заданной высоты. 

Метод Монте-Карло подразумевает, что в качестве параметров используются случайные переменные. И здесь стоит сказать пару слов о том, что такое <i>случайная величина</i>. Вернёмся к математикам и математическим структурам. Какой структурой можно моделировать результаты выпадения числа на игральной кости, или уровень воды в реке, ведь на воде постоянное волнение? Как работать с числом автомобилей проезжающих перекрёсток в течение часа? Какой структурой можно описать состояние электрона? С одной стороны, это конкретные числа из вполне определённого множества значений: для кости, например, из множества $inline$\{1,2,3,4,5,6\}$inline$, и это значение легко получить, проведя эксперимент. Однако, повторный эксперимент даст иной результат, это явно не просто число: сегодня оно одно, завтра -- другое. Может даже возникнуть философский вопрос: а имеет ли смысл говорить о каком-то точном значении "уровня воды в реке", или числе автомобилей, ведь эти величины невозможно "поймать" и зафиксировать? Может ли быть с каком-либо смысле <i>точное </i>знание о случайной переменной? 
 
Часто, говоря о таких случайных величинах, ограничиваются одним лишь средним значением, но это отличный способ запутаться или даже намеренно запутать. Два числа: среднее и стандартное отклонение, уже лучше, но это явно не вся информация об интересующем нас объекте. Может быть, это не числа, а множества? Скажем, уровень воды в реке можно попытаться описать интервалом возможных значений с учётом волнения, а для примера с машинами сказать, что за час проезжает от 1 до 100 машин и т.д. Но легко увидеть, что и множества возможных значений тоже не достаточно, например, при многократном повторении измерения числа автомобилей на улице, какие-то числа будут встречаться чаще, а каких-то мы не дождёмся вовсе. В прошлой главе мы ввели меру вероятности, как функцию на вероятностном пространстве. Для случайной величины элементарными событиями этого пространства будут элементы области её определения, а мерой задаётся <i>распределение вероятности</i> для этой величины. И вот это уже исчерпывающая и точная информация. Функцию можно представить аналитически или в виде аппроксимации другой функцией, в виде таблицы, гистограммы, либо в виде графика. Все эти представления являются моделями одного и того же объекта -- случайной величины, и самое важное тут не столько конкретный вид представления, сколько математические свойства этой функции. Для распределений вероятности свойства бывают разными: количество параметров, количество мод, энтропия, бесконечная делимость, аддитивность, устойчивость, интегрируемость и так далее. Моделируя неизвестную случайную величину, получаемую из эксперимента, статистик из огромного арсенала известных распределений с точно определёнными свойствами, выбирает не столько "самую похожую" функцию, сколько функцию, в наиболее полной мере совпадающую по свойствам с наблюдаемой случайной величиной. Это составляет суть <i>статистического анализа</i> и техник <i>проверки статистических гипотез</i>, знакомых каждому студенту, прикоснувшемуся к матстатистике. 
 
Мы сейчас имеем задачу, в каком-то смысле, обратную. Нам надо задать параметры бутерброда случайными переменными, не имея статистических данных, а руководствуясь нужными свойствами этих величин. Это важная и интересная часть метода Монте-Карло, от которой зависит и решение, и его корректность. 

<img src="https://habrastorage.org/webt/p_/lo/tp/p_lotpbr0hjy_w45975u6m89bcq.png" width="50%" align="right"/><b>1. Размеры бутерброда.</b> Какими они могут быть? Разумной величины канапе имеет сантиметра $inline$3$inline$ в ширину, а студенческий добрый "лапоть" может быть сантиметров $inline$15$inline$. Чаще всего, бутерброды имеют размеры от $inline$6$inline$ до $inline$10$inline$&nbsp;см. При этом вероятность встретить бутерброд миллиметровой или метровой ширины, в практическом смысле, равна нулю. Больше про бутерброды я ничего сказать не могу и приму размеры бутербродов <i>равномерно распределёнными</i> в указанном диапазоне. Выбор неидеален, всё же нормальные бутерброды мы встречаем чаще крошечных или гигантских. Но позже мы увидим, что это слабое место можно изящно обойти.

<b>2. Начальное положение.</b> Тут мы, не мудрствуя, зададим равномерное распределение для смещения бутерброда над краем стола, лишь бы он вообще упал.

<img src="https://habrastorage.org/webt/pw/k7/bw/pwk7bwilnucrd1qeum_5tx4xx1g.png" width="50%" align="right"/><b>3. Коэффициент трения.</b> Это безразмерная величина, зависящая только от материала. Столы и скатерти бывают разные, пальцы сжимают бутерброд с разной силой. Диапазон коэффициента от $inline$0.01$inline$ до $inline$0.5$inline$, при этом крайние значения маловероятны, в среднем можно ожидать что-то около $inline$0.3$inline$. Нам поможет любое колоколообразное несимметричное распределение неотрицательной величины, например <i>гамма-распределение</i> или <i>лог-нормальное</i>.

<img src="https://habrastorage.org/webt/gi/zb/l-/gizbl-hctfatourn0xtbvdhv9cy.png" width="50%" align="right"/><b>4. Начальная скорость.</b> Мы редко запускаем бутерброды с большой скоростью, и чаще всего не кидаем их вовсе, но смахнуть, всё же, случается. Про величину скорости известно лишь, что она положительна и можно предположить, что при смахивании в среднем мы движемся также, как в среднем движутся руки, то есть, со скоростью около $inline$0.5$inline$&nbsp;м/с. Если про величину известно только это, то её разумно описать <i>экспоненциальным распределением</i> (почему, мы поговорим позже, когда узнаем об энтропии распределений). Его мода равна нулю, так что доля бутербродов, упавших без большой начальной скорости будет вполне приличной. В "хвосте" окажутся бутерброды, нечаянно запускаемые в полёт при смахивании крошек со стола.

5. Высоту стола мы будем фиксировать, ронять с неё сотню бутербродов, подсчитывать число упавших маслом вниз и заносить в таблицу, либо отражать на графике вероятности от высоты.

Вот, какие вероятности уронить бутерброд маслом вниз у нас получаются:

<img src="https://habrastorage.org/webt/7z/nk/29/7znk29cv7cfnnbmeerouledyhma.png" width="85%" align="center"/><i><font color="#444">Вероятность приземления маслом вниз разных бутербродов с разными условиями в зависимости от высоты падения. Для каждой высоты проводилось $inline$100$inline$ испытаний.</font></i>

Какая-то тенденция видна, но получился очень большой разброс. При усреднении получается что вероятность от высоты падения почти не зависит и едва превышает половину. Можно ли доверять такому эксперименту? Опровергает ли он закон бутерброда? Может быть, мы недостаточно много бросали бутербродов -- вон какие шумные получились данные! Давайте увеличим число бросаний, и посмотрим, что получится:

<img src="https://habrastorage.org/webt/jp/c1/v7/jpc1v71j7vpaqh_ek0tsoeu4kkm.png" width="85%" align="center"/><i><font color="#444">Вероятность приземления маслом вниз разных бутербродов посчитанная для большего числа испытаний (по 500 на каждую высоту).</font></i>

Выбросов стало меньше, но ещё более отчётливо видно, что закон бутерброда весьма и весьма слаб. Но правильно ли мы выполняли наши эксперименты? Метод Монте-Карло выглядит заманчиво простым: знай себе подставляй какие попало данные и смотри, что получается. Математика честная штука: <i>на какой попало вопрос она готова дать какой попало ответ</i>. А вот имеет ли смысл этот ответ, сильно зависит от вопроса.

Перед тем как приступать к экспериментам, не таким игрушечным, как у нас, а настоящим и дорогостоящим, использующим орбитальный спутник, ускоритель элементарных частиц или тысячу настоящих бутербродов с маслом, необходимо проводить подготовительную работу. И одним из мощных и красивых способов, позволяющих понять, как правильно проводить эксперимент, является <i>анализ размерностей</i> задачи. 

Бутерброд мы моделировали обобщёнными координатами, импульсами и силами -- физическими величинами, которые, в свою очередь связаны уравнениями аналитической механики. В физике количественные величины, с которыми мы имеем дело, которые мы измеряем и подставляем в уравнения, не "умещаются" в обыкновенные числа -- они имеют дополнительную структуру, которая называется <i>размерностью</i>. Не все корректные математические выражения имеют смысл, если в них участвуют размерные величины. Скажем, нет смысла складывать скорость и массу, невозможно сравнить силу и расстояние. Однако, можно рассмотреть произведение скорости и массы, получив новую размерную величину -- количество движения, или импульс; можно возвести скорость в квадрат и поделить на расстояние, получив таким образом, величину, имеющую размерность ускорения. 

Анализ размерности и теория подобия родились давно, со времён лорда Релея. Они используются в механике, электродинамике, в астрофизике и космологии, позволяя с пугающей изящность подходить к решению сложных задач. Однако исследования в этой области не завершены и <abbr title="Сами по себе размерности образуют т. н. <i>свободную абелеву группу</i>, а размерные величины -- <i>локально тривиальное расслоение</i>. Я не буду здесь расшифровывать, что означают эти термины, в двух словах это не получится. Пусть для заинтересованного читателя упоминание об алгебраических структурах будет указателем направления, с которого начинается настоящая математика.">строгое определение</abbr> структуры, образуемой количественными (размерными) величинами было дано лишь в 2016 году испанским математиком Альваро Рапозо. 

Ограничения, накладываемые размерностями на физические формулы, часто воспринимаются учениками и студентами, как лишняя морока, за которой нужно следить. Но с другой стороны, логически согласованные ограничения чрезвычайно полезны! Они отсеивают неверные выражения, они позволяют "предвидеть" структуру решения физической задачи до её детального решения, они являются мощным инструментом при планировании и анализе экспериментальных данных.

Но вот, что интересно. Мы рассчитывали падение бутерброда в программе, используя не размерные, а обыкновенные числа. Как можно "очистить" физическую величину от размерности и превратить в число? Для этого служат хорошо нам знакомые <i>единицы измерения</i> физических величин: все эти метры, фунты, минуты и ньютоны. Единицы измерения берут на себя размерную часть величины, оставляя нам множитель -- вещественное число, с которым уже может иметь дело вычислительная машина. Например, скорость в выбранном направлении величиной $inline$60$inline$&nbsp;км/ч можно представить числом $inline$60$inline$. Но тут есть тонкость: от выбора единиц измерения зависит числовое представление. При выборе других единиц (скажем, метров и секунд) <i>эта же скорость</i> будет представлена другим числом: $inline$16.7$inline$. Числа разные, но величина одна, и она не зависит от нашего выбора каких-то единиц. 

Возникает вопрос: существует ли в каком-либо смысле "самая лучшая" система единиц? Оказывается, существует, для этого при решении задачи нужно использовать в качестве единиц измерения размерные величины, входящие в задачу. 

В этой главе у нас летают бутерброды, в предыдущей летали монетки, приведём ещё один летательный пример. Как следует сравнивать лётные качества различных птиц? Понятно, что скорости, которые развивают птицы, различны: у голубя -- $inline$90$inline$&nbsp;км/ч, у стрижа -- $inline$140$inline$&nbsp;км/ч, у журавля, воробья или кряквы -- $inline$50$inline$&nbsp;км/ч, у колибри -- $inline$80$inline$&nbsp;км/ч. Но все эти птицы существенно различаются по размерам и манере полёта. Если длину попугая измерять в попугаях, а время -- в периодах взмаха его крыльев, можно получить некую, как говорят, <i>собственную скорость</i>. Можно разделить скорости, которые могут развивать эти птицы, на собственные значения и получить безразмерную скорость, показывающая на сколько длин корпуса может переместиться птица за один взмах крыльев. Вот что получается при таком сравнении:
<table>
<tr><th>птица</th><th>скорость, км/ч</th><th>длина тела</th><th>частота взмахов, 1/с</th><th>собственная скорость, м/с</th><th>безразмерная скорость</th></tr>
<tr><td>стриж</td><td>140</td><td>18 см</td><td>5</td><td>0,9</td><td>43</td></tr>
<tr><td>почтовый голубь</td><td>90</td><td>30 см</td><td>5</td><td>1,5</td><td>17</td></tr>
<tr><td>колибри</td><td>80</td><td>8 см</td><td>200</td><td>16</td><td>1,4</td></tr>
<tr><td>журавль</td><td>50</td><td>1 м</td><td>2,5</td><td>2,5</td><td>5</td></tr>
<tr><td>кряква</td><td>50</td><td>40 см</td><td>9</td><td>3,6</td><td>3,8</td></tr>
<tr><td>воробей</td><td>46</td><td>12 см</td><td>13</td><td>1,6</td><td>8</t></tr>
</table>
Видно, что стриж по праву считается лучшим летуном, а вот колибри неэффективно расходует энергию, впрочем, у этой птицы нет задачи лететь долго, как у голубя. Одинаковые абсолютные скорости журавля, воробья и утки существенно различаются при переводе в безразмерные величины. Такого рода расчёты используются чтобы моделировать настоящий большой самолёт, испытывая маленькую модель в аэродинамической трубе. Если все безразмерные параметры этих двух систем близки, они могут считаться <i>физически подобными</i> и моделирование имеет смысл. Мы уже пользовались таким подходом, отражая на диаграммах Лоренца относительные единицы вместо абсолютных. Это позволяло нам сравнивать между собой различные явления и распределения. 

Понятно, какой будет самая подходящая система единиц при анализе полёта бутерброда. Конечно же, длину надо измерять в бутербродах. За единицу времени можно взять величину $inline$\sqrt{l/g}$inline$, где $inline$l$inline$ -- длина бутерброда, а $inline$g$inline$ -- ускорение свободного падения. И высоту стола следует измерять не в метрах, а в собственных единицах. Получив таким образом результат, мы сразу можем обобщить его как на случай канапе, так и для солидного "лаптя". Итак, повторим вычисления, но на графике отразим высоту стола в относительных единицах. Если мы всё сделали правильно, то для двух разных по размерам бутербродов мы должны получить очень похожие графики. Давайте проверим это:

<img src="https://habrastorage.org/webt/ju/hq/px/juhqpxbj9kirya6ywhhbtpjmvfc.png" width="85%" align="center"/><i><font color="#444">Вероятность приземления маслом вниз бутерброда некоторой фиксированной величины, при различной высоте падения, вычисленной в относительных единицах. Голубые точки соответствуют бутерброду размером 5 см, красные -- 10 см.</font></i>

В первоначальной постановке мы, перебирая различные размеры, получали облако результатов, в котором оказалась скрыта интересующая нас зависимость. При увеличении числа испытаний, мы это облако усреднили и получили неинтересный ответ. Чтобы ярче показать в чём состояла методическая ошибка, представьте, что мы захотим вычислить вероятность падения бутерброда маслом вниз, перебирая случайным образом и начальные условия и размеры бутерброда и высоту. Это равносильно усреднению всех полученных нами результатов разом. В итоге мы получим уверенную серединку -- вероятность, очень близкую к $inline$1/2$inline$, как при подбрасывании монетки! Это очень логичный и ожидаемый результат, но он совершенно неинтересен. Усредняя множество данных для разных размеров мы уже приблизились к такому выводу. Но если цель моделирования состоит в выявлении закономерности, то имеет смысл минимизировать число параметров. 

Очищенные данные теперь чётко говорят в пользу закона подлости, ограничивая его, однако, определённым диапазоном высот: от $inline$2$inline$ до $inline$6$inline$ размеров бутерброда (от высоты локтя над столом до высоты руки стоящего человека). За пределами этого диапазона у бутерброда повышается шанс повернуться нужной стороной перед падением. 

А что если заглянуть дальше, и кидать бутерброды из окна? Понятно, что при падении с большой высоты уже становится неважно какой стороной упало то, во что превратится бутерброд, и сопротивление воздуха стабилизирует падение, но чисто теоретически, что мы ожидаем увидеть? Наверное, должны наблюдаться некие колебания вероятности по мере увеличения времени полёта. Давайте посмотрим:
<img src="https://habrastorage.org/webt/qa/cb/gv/qacbgv4bnasbqzbuh1mcxr5zdp4.png
" width="85%" align="center"/><i><font color="#444">Вероятность приземления маслом вниз бутерброда при падении с большой высоты.</font></i>

С частотой мы угадали, но любопытно, что амплитуда уменьшается, и колебания вероятности сходятся к $inline$0.5$inline$. О чём это может говорить? Тот же ли это эффект, что и в случае с монеткой, когда при увеличении длительности полёта становятся более существенными последствия отклонений начальных условий? Оказывается, в данном случае природа выравнивания вероятностей иная. 

<h3>Ещё немного анализа размерностей</h3>
Какой бы несерьёзной ни была тема нашей книжки, мы говорим на языке математики, а он стремится к точным решениям. Метод Монте-Карло позволил нам получить представление о решении, но это было то, что называется грубой силой. Это не так интересно, как хоть какое-то, но аналитическое решение. Анализ размерностей позволит нам получить теоретический вид зависимости, полученной методом Монте-Карло. Для этого нам не понадобится решать дифференциальные уравнения, более того, все наши рассуждения не выйдут за пределы вполне примитивных и очевидных соотношений. В этом и состоит очарование анализа размерностей, которое, впрочем, иногда выглядит фокусничеством. Итак приступим, ограничиваясь для простоты лишь соскальзыванием бутерброда длины $inline$l$inline$ со стола высоты $inline$H$inline$ с нулевой горизонтальной скоростью.

1. Угол поворота падающего бутерброда зависит от времени и угловой скорости: $$display$$\varphi=t\omega.$$display$$
2. Угловая скорость, равна произведению времени соскальзывания и углового ускорения:  $$display$$\omega = t_0\varepsilon.$$display$$ 
3. Время соскальзывания можно выразить через ускорение свободного падения и часть длины бутерброда, которая соприкасалась со столом следующей пропорцией: $$display$$t_0 \propto \sqrt{\frac{l_0}{g}}.$$display$$ Здесь $inline$l_0$inline$ -- длина бутерброда, лежавшая на столе. Здесь мы используем отношение пропорциональности, обозначенное знаком $inline$\propto$inline$. Выражение $inline$y \propto x$inline$ можно заменить на $inline$y = C x$inline$, где $inline$C$inline$ -- какая-то неизвестная константа. Я очень люблю это отношение. Пропорциональность "вбирает в себя" всё сложное, что превращается в константу: и то, что при повороте меняется момент силы тяжести, и то что при соскальзывании изменяется центр вращения. Всё это, конечно, нужно знать для точного расчёта, но в результате получится всего лишь безразмерный коэффициент, а в нашем анализе он не играет роли. Одним значком мы избавили себя от утомительного интегрирования.

4. Угловое ускорение происходит от ускорения силы тяжести и зависит от плеча, к которому сила тяжести прилагается: $$display$$\varepsilon \propto \frac{g}{l-l_0}.$$display$$ И опять знак $inline$\propto$inline$ позволил нам не вычислять момента инерции пластины для оси, лежащей в её плоскости, а так же  изменяющейся проекции силы тяжести (это ещё два интеграла).

5. Наконец, время падения зависит от высоты стола и ускорения свободного падения: $$display$$t \propto \sqrt{\frac{H}{g}}.$$display$$
6. Подставляя все эти выражения в первую формулу, получаем простой результат:
$$display$$\varphi\propto\sqrt{\frac{l_0 H}{l(l-l_0)}},$$display$$ который, если измерять все длины в бутербродах, превращается в  $$display$$\varphi\propto\sqrt{\frac{x h}{1-x}}.$$display$$ Здесь $inline$l_0 = x l$inline$ и $inline$H = h l$inline$. Что же, всё сходится -- угол величина безразмерная и зависит она от безразмерных коэффициентов. От масштаба времени этот угол не зависит, остаётся чистая геометрия. Знаменатель не опасен, при $inline$x > 0.5$inline$ бутерброд не упадёт вовсе (мы рассматриваем нулевую горизонтальную скорость), так что $inline$0 < x < 0.5$inline$.

То, какой стороной упадет бутерброд определяется знаком синуса угла $inline$\varphi$inline$, то есть функцией $inline$\mathrm{sign}(\sin\varphi)$inline$. Эта функция возвращает $inline$-1$inline$ для случая "маслом вверх" и $inline$1$inline$ для "масло вниз". Мы можем использовать эту функцию для выражения вероятности падения детерминистического бутерброда, если приведём её к диапазону от $inline$0$inline$ до $inline$1$inline$:  $$display$$P_{\downarrow}(x,h) = \frac12\left[1+\mathrm{sign}(\sin \varphi)\right] = \frac12\left\{1+\mathrm{sign}\left[\sin\left(C \sqrt{\frac{x h}{1-x}}\right)\right]\right\},$$display$$ где стрелочка символически означает положение масла.  Коэффициент $inline$C$inline$, появившийся в формуле вероятности выражает всё то, что осталось спрятанным с помощью знака пропорциональности. Это был, дествительно, очень хитрый ход, он избавил нас от утомительного интегрирования, (и даже трёх), но как же нам теперь узнать чему равен этот коэффициент? Из эксперимента, причём достаточно одного единственного эксперимента с измерением угла в момент падения, чтобы получить оценку этого значения! С помощью симулятора я легко выяснил, что $inline$C = 2.3$inline$. 

Следующая задача -- математически выразить то, что начальные положения $inline$x$inline$ могут быть разными. Нас интересует вероятность того, что бутерброд упадёт маслом вниз, если $inline$x$inline$ будет равно $inline$0.2$inline$ или $inline$0.4$inline$ или любому числу от $inline$0$inline$ до $inline$0.5$inline$. Мы использовали союз "или", при этом каждый из этих случаев рассматривается нами, как независимый и исключающий все прочие при проведении конкретного эксперимента. Вспомним, что вероятность -- это мера вероятностного пространства, а раз так, то вероятность аддитивна. Это позволяет нам попросту сложить вероятности $inline$P_{\downarrow}(x,h)$inline$, для всех значений $inline$x$inline$, умножив из предварительно на вероятность попадания в конкретный диапазон значений. Разобьем отрезок от $inline$0$inline$ до $inline$0.5$inline$ на $inline$n$inline$ частей, и вычислим оценку вероятности в виде суммы:$$display$$P_{\downarrow}(h) \sim \frac{2}{n}\sum\limits_{i = 0}^n P_{\downarrow}\left(\frac{i}{2n},h\right),$$display$$ здесь множитель $inline$2/n$inline$ выражает вероятность для случайной величины $inline$x$inline$ попасть в отрезок ширины $inline$1/n$inline$. Вот как выглядят результат для значительного числа разбиений ($inline$n=100$inline$) и серия численных экспериментов с нулевой горизонтальной скоростью:

<img src="https://habrastorage.org/webt/05/ia/t4/05iat4kpusfsobkeedzifmpn2m0.png" width="85%" align="center"/><i><font color="#444">Теоретическая и экспериментальная оценка вероятности приземления маслом вниз бутерброда при падении с большой высоты. Начальная горизонтальная скорость в экспериментах равна нулю.</font></i> 

Решение, которое мы приводили до этого, содержит больше случайных параметров, поэтому оно оказалось в большей степени сглаженным и приближенным к $inline$0.5$inline$. Но, в принципе, анализ размерности можно провести и для более общего случая. 

Обратите внимание на то, что вероятность $inline$P_{\downarrow}$inline$ приближается, при увеличении $inline$h$inline$, к значениям, близким к $inline$0.5$inline$. И это происходит вовсе не из-за неопределённости и влияния начальных ошибок. Вычисления показали, что это результат сложения множества гармоник, образуемых значениями $inline$x$inline$, при суммировании $inline$P_{\downarrow}(x,h)$inline$. Если мы забудем про несчастный бутерброд и продолжим график $inline$P_{\downarrow}$inline$, то увидим, что оценка вероятности так продолжит колебаться вблизи $inline$0.5$inline$, постепенно стремясь к этому значению.

А можно ли выяснить без прямых вычислений, будет ли вероятность продолжать сходится к $inline$0.5$inline$ или когда-нибудь снова станет расти? И в этом явлении тоже есть место нетривиальной и глубокой математике. Дело в том, что каждому значению $inline$x$inline$ соответствует определённая частота колебаний, а весь набор формирует так называемый <i>спектр</i> суммарной функции. Если спектр дискретный, то есть состоит из отдельных частот, то суммарная функция (она называется Фурье-образом) будет периодичной. Непрерывному спектру в виде константы на отрезке от $inline$0$inline$ до $inline$0.5$inline$ будет соответствовать апериодичная функция, похожая на убывающие  колебания. Но это мы заглянули в новый раздел математики -- в <i>функциональный анализ</i>.

Великий Энрико Ферми, дедушка метода Монте-Карло (отцом считается математик Станислав Улам), приучал своих учеников делать простые оценочные вычисления, прикинуть на клочке бумаги или на пальцах, что мы ожидаем получить прежде чем приступать к точному решению задачи. Замечательно, что если оценка окажется верной, станет понятно, что суть проблемы ухвачена, если же нет, то это тем более полезный результат -- значит, задача оказалась интереснее, чем кажется! 
  
В нашем случае простой оценки вполне достаточно, задача о бутерброде не стоит более тщательного решения. Метод Монте-Карло показал нам только намётки решения, и анализ размерности показал лишь некоторую его общую структуру, но вместе они смогли нам показать как устроена искомая вероятность. Эрудиция позволяет математику видеть в намётках решения готовые структуры и делать далеко идущие предположения и выводы.

Роберт Мэтьюз в своём эпохальном исследовании тоже использовал анализ размерностей, чтобы показать, что закон бутерброда носит фундаментальный характер. Его вывод основан на том, что предельная высота организма, вставшего на задние конечности с целью передними конечностями взять бутерброд с маслом, определяется прочностным свойствами биологических тканей и гравитацией. В свою очередь, характерный размер бутерброда должен соответствовать масштабу существа -- и карлики на какой-нибудь тяжёлой планете и дылды на планете с малой гравитацией будут выбирать себе бутерброды по размеру. Тут мы подходим к тому, что в науке называется <i>спекуляцией</i>. Это не перепродажа всякого добра втридорога, а сомнительные предположения, ложащиеся в основание логического построения. В частности, мы предполагаем у существ руки, имеющие пропорции, сходные с нашими, а это более чем спорно.

<h3>Про масло и ветер</h3>
В мерфологии известно нeпpaвильноe цитирование закона X.Л. Meнкинa Гpoccмaнoм: <blockquote>Сложные проблемы всегда имеют простые, легкие для понимания неправильные решения. </blockquote> Очень часто можно услышать, что в законе бутерброда виновато масло, которое плотнее хлеба и потому "перевешивает". И хотя это не относится к предмету нашей книжки, я хочу разобрать этот вопрос, чтобы поставить в нём, наконец, точку. Так, чтобы кто угодно потом мог сослаться на то, что "учёные доказали -- наличие масла не влияет на то, какой стороной шлёпнется бутерброд!"

В детстве мы забавлялись тем, что подбрасывали высоко вверх голубиное маховое или хвостовое перо, воткнутое в кусочек пластилина, диаметром в сантиметр-два. Оно подлетало метра на четыре, после чего красиво и плавно спускалось на авторотации, как вертолёт с заглушённым двигателем. Потом мы подросли, и наши забавы стали менее безобидными. Мы раздобывали гайку и вкручивали в нё два болта с противоположных сторон, спрессовывая начинку из скрошенных спичечных головок. Оставалось привязать к одному из болтов ленту или просто кусок верёвки, хорошенько раскрутить и запустить в небо метров на пятнадцать. В падении легкая лента стабилизировала вертикальное положение снаряда, обеспечивая качественный удар об асфальт и небольшой взрыв, порой разрывавший гайку на куски. (Будьте осторожны, если решитесь поделиться этим опытом детства со своими детьми!)

В обоих экспериментах мы видим, что легкое перо или лента быстро оказывались над тяжёлой частью аппарата и стабилизировали падение. Это, видимо, и приводит к интуитивному мнению, что тяжелое масло и лёгкий хлеб тоже должны вести себя подобным образом. Представим себе воздушный шар: более плотная корзина всегда располагается под менне плотным шаром. Более того, опыт подсказывает, что если взяться двумя пальцами за геометрическую середину предмета с несимметрично распределённой массой, то он кувыркнётся так, чтобы тяжёлая часть оказалась внизу.

Но оба эти явления не работают в случае падающего бутерброда.

Начнём со второго процесса -- с "перевешивания". Я не случайно занудно уточнил: "..если взяться за <i>геометрическую</i> середину предмета..", здесь имеется в виду, что точки касания лежат на некой прямой, образующей ось вращения, проходящую сквозь <i>центр тяжести</i> предмета. В таком случае, действительно, устойчивым положением будет такое, в котором центр тяжести окажется ниже оси. Но если образуемая пальцами ось вращения проходит через центр тяжести, то система окажется в безразличном равновесии -- ей будет всё равно как она ориентирована.

Что же заставляет ориентироваться "правильным" образом пёрышко с грузиком, бомбочку из гайки или воздушный шар с воздухоплавателями в корзине? Воздух. Он "держит" наши предметы так, что ось проходит выше центра тяжести. Точнее, набегающий поток воздуха, создающий силу, распределённую по площади тела. И условная точка приложения этой силы будет располагаться вблизи геометрического центра площади фигуры. Чтобы стало яснее, нарисуем силы, действующие на условный воздушный шар, как на предмет с неравномерной плотностью:

<img src="https://habrastorage.org/webt/tc/du/qd/tcduqd0tr1q9gi5xvdidfkpmh_y.png" width="65%" align="center"/><i><font color="#444">Силы, приводящие воздушный шар в устойчивое положение.</font></i> 

А что бутерброд?

Во-первых, если мы "выключим" воздух, он будет просто падать.  В свободном падении тело вращается именно вокруг центра масс, так что у него нет резона поворачиваться каким-либо особенным образом. Как говорят в школе: "В падающем лифте наблюдается невесомость". Масло в бутерброде столь же "невесомо". 

Плотное масло может повлиять на процесс соскальзывания, оно эффективно поднимет центр масс над точной касания и изменит в выражении для углового ускорения $inline$l$inline$ на $inline$\sqrt{l^2+d^2} = l\sqrt{1+\delta^2}$inline$, где $inline$\delta=d/l$inline$ -- относительная толщина бутерброда. При небольших значениях  $inline$\delta$inline$ это выражение можно вычислить как $inline$l(1+\delta^2/2)$inline$. Получаем, как говорят, эффект второго порядка. Для бутерброда с соотношением ширины к толщине как $inline$5$inline$ к $inline$1$inline$, относительные изменения не превышают $inline$2\%$inline$. И это максимальная верхняя граница эффекта, ведь мы подняли центр масс на толщину бутерброда, что соответствует бесконечно плотному маслу!

Теперь "включим" воздух обратно, оставив плотность масла бесконечно превышающей плотность хлеба. Имеем тонкую плотную пластину с невесомым, но сопротивляющимся воздуху "парашютом". Пока плоскость бутерброда расположена горизонтально или около того, на неё действует момент сил воздушного сопротивления пропорциональный парусности -- площади, с которой взаимодействует поток воздуха:$inline$M_{-} \propto l^2$inline$. В вертикальном положении парусность уменьшится и, соответственно, момент будет другим: $inline$M_{|} \propto l d$inline$. Отношение этих моментов: $inline$M_{|}/M_{-} \propto \delta.$inline$ Я написал здесь знак пропорциональности, поскольку коэффициенты сопротивления для пластинки, расположенной поперёк и вдоль потока различаются, и мне они неизвестны. Но они и не нужны -- уже видно, что влияние воздуха в вертикальном положении (а именно оно делает неравнозначным положение масла) слабее чем в горизонтальном. А теперь вспомним, что бутерброд вращается, а значит, он подставляется потоку то торцом, то плоскостью. Мы можем ввести меру действия сил сопротивления. Если угловая скорость вращения не существенно изменяется за один период (а для воздуха это так), то имеет смысл в качестве меры взять изменение момента импульса, пропорциональное времени действия силы. В свою очередь, период действия пропорционален углу, "заметаемому" бутербродом в течение этого периода. В итоге, меры действия моментов $inline$M_{|}$inline$ и $inline$M_{-}$inline$ будут пропорциональны $inline$M_{|}\varphi_{|}$inline$ и $inline$M_{-}\varphi_{-}$inline$, где углы которые заметают торец и плоскость, показаны на чертеже. <img src="https://habrastorage.org/webt/zp/ly/n6/zplyn61fjod6tnld3urij32kdjk.png" width="15%" align="right"/> Мы могли бы в качестве меры использовать работу сил сопротивления и получили бы такое же соотношение. Отношение углов легко вычислить: $$display$$\frac{\varphi_{|}}{\varphi_{-}} = \frac{\varphi_{|}}{\frac{\pi}{2}-\varphi_{|}}.$$display$$ При малых $inline$d/l$inline$, $inline$\varphi_{|}\sim \delta$inline$ (используем свойство тангенса малого угла, выполняющегося с $inline$10\%$inline$ точностью при углах меньше $inline$30^\circ$inline$), а значит, имеем: $$display$$\frac{M_{|}\varphi_{|}}{M_{-}\varphi_{-}} \sim \delta\frac{\delta}{\frac{\pi}{2}-\delta} \propto \delta^2. $$display$$ Опять получается, что влияние несимметричности для плоского бутерброда ограничивается эффектом второго порядка.  Обычно, плотность масла лишь вдвое больше плотности хлеба, и смещение центра масс не превышает трети толщины бутерброда при разумном слое масла, не превышающем толщину хлеба. Это наблюдение уменьшит влияние масла до $inline$0.2\%$inline$.  

Если читателю показалось, что мы сейчас палили из пушки по воробьям, то я ним полностью соглашусь. Но, во-первых, мне не хочется больше слышать о "перевешивающем" масле, во-вторых, не хочется быть голословным, а в-третьих, я хотел показать как физик оценивает величины, представляя процесс, но не обладая полными данными. Конечно, в момент приземления масло может прилипнуть к полу и не дать бутерброду подпрыгнуть и перевернуться вновь, но механику удара, упругой деформации и подскока кусочка хлеба я уж точно разбирать не буду. Итак вышло многовато анализа для этой проблемы. И вторую Шнобелевскую за неё уже не дадут.  

$$display$$* * *$$display$$
Не так была важна была цель нашего пути: опровержение либо оправдание закона бутерброда, как сам путь. Он показал как совмещение разных математических методов позволяет взглянуть на задачу с разных сторон и дарит достаточно точное знание, даже без детального решения задачи. В согласованности различных математических дисциплин, подходов и точек зрения состоит сила и красота математики. Тут уместно вспомнить чудесные слова Марины Цветаевой: <i><font color="#800">"Я не хочу иметь точку зрения, я хочу иметь зрение"</font></i>. Изучение различных областей математики способно дать исследователю настоящее "объёмное" многомерное зрение, позволяющее заглянуть в кажущееся закрытым и скрытым пространство знаний.
