<!DOCTYPE html>
<html>
    <head>
    <meta charset='UTF-8'/>
    <script src='../lib/d3.js'></script>
    <script src='../lib/analysis.js'></script>
    <script src='../lib/functions.js'></script>
    <script src='../lib/tools.js'></script>
    <script src='../lib/matrix.js'></script>
    <script src='../lib/statistics.js'></script>
    <script src='../lib/graphics.js'></script>
    <script src='../lib/signal.js'></script>
    <script src='leela.js'></script>
    <link rel="stylesheet" href="../css/styles.css">
    <style>
    .red .points {
	stroke:none;
	fill:red;
    }
    .green .points {
	stroke:none;
	fill:darkgreen;
    }
    .yellow .points {
	stroke:none;
	fill:orange;
    }
    .purple .points {
	stroke:none;
	fill:purple;
    }
    .label {
	font-size : 150%;
    }
    </style>
    </head>
    <body>
      <script>

	var z2 =  [[0,1],
		   [1,0]]

	var z3 =  [[0,1,2],
		   [1,2,0],
		   [2,0,1]]

	var q31 =  [[0,1,2],
		    [2,0,1],
		    [1,2,0]]

	var q32 =  [[0,1,2],
		    [2,0,1],
		    [1,2,0]]

	var z4 =  [[0,1,2,3],
		   [1,2,3,0],
		   [2,3,0,1],
		   [3,0,1,2]]

	var v4 =  [[0,1,2,3],
		   [1,0,3,2],
		   [2,3,0,1],
		   [3,2,1,0]]

	var z5 =  [[0,1,2,3,4],
		   [1,2,3,4,0],
		   [2,3,4,0,1],
		   [3,4,0,1,2],
		   [4,0,1,2,3]]
	
	function plus(g)
	{
	    return (x,y) => g[x][y]
	}

	function fibs(g,[a,b],n)
	{
	    res= [a,b]
	    for(var i = 2 ; i < n; i++)
	    {
		res.push(plus(g)(res[i-1],res[i-2]))
	    }
	    return res
	}

	var g = z2, N = g.length, k = floor(log(N,128))
	var n = N**k
	var row = lst => [0].concat(lst).zipWith(lst.concat([0]),plus(g))
	var start = Bernoulli(0.6).samples(n)
	var start = [0,1,1].repeat(n/3)
	pts = nestList(row,start,n)
	    .reversed()
	    .mapappend((r,y) => r.map((n,x) => [n,[x+y/2,y]]))
	
	
	var p = new Graphics(createSVG('fig1'),{'size':2000,'aspectRatio':0.45})
	    .xRange([0,2*n]).yRange([0,n])
	    .listPlot(pts.filter(([n,_]) => n == 1).map(x => x[1]),{'class':'green'})
	    .listPlot(pts.filter(([n,_]) => n == 2).map(x => x[1]),{'class':'red'})
	    .listPlot(pts.filter(([n,_]) => n == 3).map(x => x[1]),{'class':'yellow'})
	    .listPlot(pts.filter(([n,_]) => n == 4).map(x => x[1]),{'class':'purple'})

//	range(0,k+2).map(i => p.label(N**i,{'at':[n/2+N**i/2+1,n-N**i]}))
	
	
      </script>
    </body>
</html>	

